<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Aurora Capture 极光捕网</title>
  <link rel="stylesheet" href="./style.css?v=24" />
</head>
<body>
  <div class="bg"></div>

  <main class="wrap">
    <header class="hero">
      <div class="brand">
        <div class="logo">🕸️</div>
        <div>
          <div class="title">Aurora Capture <span class="ver">v2.4</span></div>
          <div class="subtitle">输入经纬度 → 生成关于极光可见性/可拍性的即时预测（1小时 / 3小时 / 72小时）</div>
        </div>
      </div>
    </header>

    <section class="card inputCard">
      <div class="grid2">
        <label class="field">
          <div class="lab">纬度 Latitude</div>
          <input id="lat" type="number" step="0.0001" placeholder="例如 53.47" />
        </label>

        <label class="field">
          <div class="lab">经度 Longitude</div>
          <input id="lon" type="number" step="0.0001" placeholder="例如 122.35" />
        </label>
      </div>

      <div class="row">
        <button id="runBtn" class="btn primary">生成即时预测</button>
        <button id="magBtn" class="btn">转换磁纬度</button>
        <div class="hint">提示：经纬度可在 Google/Apple/高德地图的“位置详情”里复制。</div>
      </div>

      <details class="faq">
        <summary>如何查看经纬度？</summary>
        <div class="faqBody">
          在 Google / Apple / 高德地图：长按你的位置 → 详情里会显示“纬度、经度”。复制填入即可。
        </div>
      </details>

      <div class="statusLine" id="statusLine">
        <span class="dot idle"></span>
        <span id="statusText">等待输入经纬度。</span>
      </div>
    </section>

    <section class="tabs">
      <button class="tab active" data-tab="t1">1小时精准</button>
      <button class="tab" data-tab="t3">3小时概率态</button>
      <button class="tab" data-tab="t72">72小时范围</button>
    </section>

    <!-- 1H -->
    <section class="tabPanel active" id="t1">
      <div class="gridCards">
        <div class="card bigCard">
          <div class="kicker">当前建议（1小时内，10分钟粒度）</div>
          <div class="bigConclusion" id="c1_now">—</div>
          <div class="meta" id="c1_meta">本地时间：—</div>
        </div>

        <div class="card bigCard">
          <div class="kicker">上游实况（近实时）</div>
          <div class="bigNums" id="sw_now">V — ｜ Bt — ｜ Bz — ｜ N —</div>
          <div class="meta" id="sw_meta">数据时间：—</div>
        </div>
      </div>

      <div class="card chartCard">
        <div class="chartHead">
          <div>
            <div class="kicker">1小时 C值柱状图</div>
            <div class="meta">横轴：时间（本地）｜纵轴：C值（0-10，Capture）</div>
          </div>
          <div class="chip" id="c1_chip">—</div>
        </div>
        <canvas id="cChart" height="220"></canvas>

        <div class="chartFoot">
          <div class="miniTitle">点击柱子查看该时刻结论：</div>
          <div class="chartPick" id="chartPick">—</div>
        </div>
      </div>

      <div class="card noteCard">
        <div class="miniTitle">1小时结论分级（5档）</div>
        <ul class="bullets">
          <li><b>不可观测</b>：无需行动。</li>
          <li><b>低概率</b>：可以看一眼，但不建议投入太多成本。</li>
          <li><b>可蹲守</b>：条件有戏，建议准备设备，盯数据与变化。</li>
          <li><b>值得出门</b>：建议到位开拍/观测。</li>
          <li><b>强烈推荐</b>：很值得冲，尽快行动。</li>
        </ul>
      </div>
    </section>

    <!-- 3H -->
    <section class="tabPanel" id="t3">
      <div class="gridCards">
        <div class="card bigCard">
          <div class="kicker">系统状态（未来3小时，不分分钟）</div>
          <div class="bigConclusion" id="s3_state">—</div>
          <div class="meta" id="s3_meta">—</div>
        </div>

        <div class="card bigCard">
          <div class="kicker">本地建议（3小时）</div>
          <div class="bigConclusion" id="s3_local">—</div>
          <div class="meta">（完全等同于 1小时“当前建议”）</div>
        </div>

        <div class="card bigCard">
          <div class="kicker">送达能力综合模型</div>
          <div class="bigNums" id="p2_now">—</div>
          <div class="meta" id="p2_meta">—</div>
        </div>

        <div class="card bigCard">
          <div class="kicker">云量条件（未来3小时）</div>
          <div class="bigNums" id="cloud3">Low —% ｜ Mid —% ｜ High —%</div>
          <div class="meta" id="cloud3_meta">更佳参考：中云 ≤ 50%（越低越好），高云 ≤ 80%（薄幕可接受）</div>
        </div>
      </div>

      <div class="card noteCard">
        <div class="miniTitle">3小时状态分级（4态）</div>
        <ul class="bullets">
          <li><b>爆发进行中</b>：触发更明确，短时内值得马上看。</li>
          <li><b>爆发概率上升</b>：系统更容易发生，但未到稳定触发。</li>
          <li><b>爆发后衰落期</b>：刚过峰值，仍可能残留但总体走弱。</li>
          <li><b>静默</b>：背景不足，先别投入。</li>
        </ul>
      </div>
    </section>

    <!-- 72H -->
    <section class="tabPanel" id="t72">
      <div class="card">
        <div class="tableTitle">72小时范围预测（按天）</div>

        <!-- desktop table -->
        <div class="tableWrap onlyDesk">
          <table class="tbl" id="tbl72">
            <colgroup>
              <col style="width: 160px">
              <col style="width: 120px">
              <col style="width: 240px">
              <col style="width: 220px">
              <col style="width: auto">
            </colgroup>
            <thead>
              <tr>
                <th>日期（本地）</th>
                <th>结论</th>
                <th>日冕洞与日冕物质抛射模型</th>
                <th>太阳风送达能力综合模型</th>
                <th>云量与Kp背景</th>
              </tr>
            </thead>
            <tbody id="tbl72Body"></tbody>
          </table>
        </div>

        <!-- mobile cards -->
        <div class="mobileList onlyMobile" id="list72"></div>
      </div>

      <div class="card noteCard">
        <div class="miniTitle">72小时结论分级（按天）</div>
        <ul class="bullets">
          <li><b>可能性高</b>：值得提前规划与占位。</li>
          <li><b>有窗口</b>：有机会，重点看当天晚些时候的 1小时/3小时模块。</li>
          <li><b>小概率</b>：机会小，除非本地条件极好才尝试。</li>
          <li><b>低可能</b>：基本不建议投入。</li>
        </ul>
      </div>
    </section>

    <section class="card footCard">
      <div class="foot">
        数据源：NOAA SWPC（实时太阳风 / OVATION nowcast / Kp 预报）与 Open-Meteo 云量预报。
      </div>
    </section>
  </main>

  <script src="./app.js?v=24"></script>
</body>
</html>
